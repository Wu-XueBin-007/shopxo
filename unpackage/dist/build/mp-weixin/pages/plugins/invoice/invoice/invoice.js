(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/plugins/invoice/invoice/invoice"],{"0023":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=getApp(),s=function(){e.e("components/no-data/no-data").then(function(){return resolve(e("126b"))}.bind(null,e)).catch(e.oe)},i=function(){e.e("components/bottom-line/bottom-line").then(function(){return resolve(e("e5fd"))}.bind(null,e)).catch(e.oe)},o={data:function(){return{data_base:null,data_list:[],data_total:0,data_page_total:0,data_page:1,data_list_loding_status:1,data_bottom_line_status:!1,params:null,nav_status_list:[{name:"全部",value:"-1"},{name:"待审核",value:"0"},{name:"待开票",value:"1"},{name:"已开票",value:"2"},{name:"已拒绝",value:"3"}],nav_status_index:0,content_list:[{name:"业务类型",field:"business_type_name"},{name:"申请类型",field:"apply_type_name"},{name:"发票类型",field:"invoice_type_name"},{name:"发票金额",field:"total_price",unit:"元"},{name:"发票抬头",field:"invoice_title"}]}},components:{componentNoData:s,componentBottomLine:i},props:{},onLoad:function(t){var a=0;if(null!=(t.status||null))for(var e in this.nav_status_list)if(this.nav_status_list[e]["value"]==t.status){a=e;break}this.setData({params:t,nav_status_index:a})},onShow:function(){this.init(),n.globalData.show_share_menu()},onPullDownRefresh:function(){this.setData({data_page:1}),this.get_data_list(1)},methods:{init:function(){var a=n.globalData.get_user_info(this,"init");if(0!=a){if(n.globalData.user_is_need_login(a))return t.redirectTo({url:"/pages/login/login?event_callback=init"}),!1;this.get_data_list()}else this.setData({data_list_loding_status:0,data_bottom_line_status:!1})},get_data_list:function(a){var e=this;if(0==(a||0)&&1==this.data_bottom_line_status)return t.stopPullDownRefresh(),!1;t.showLoading({title:"加载中..."}),this.setData({data_list_loding_status:1});var s={page:this.data_page},i=null==(this.nav_status_list[this.nav_status_index]||null)?-1:this.nav_status_list[this.nav_status_index]["value"];-1!=i&&(s["status"]=i),t.request({url:n.globalData.get_request_url("index","user","invoice"),method:"POST",data:s,dataType:"json",success:function(a){if(t.hideLoading(),t.stopPullDownRefresh(),0==a.data.code)if(a.data.data.data.length>0){if(e.data_page<=1)var s=a.data.data.data;else{s=e.data_list||[];var i=a.data.data.data;for(var o in i)s.push(i[o])}e.setData({data_base:a.data.data.base||null,data_list:s,data_total:a.data.data.total,data_page_total:a.data.data.page_total,data_list_loding_status:3,data_page:e.data_page+1}),e.setData({data_bottom_line_status:e.data_page>1&&e.data_page>e.data_page_total})}else e.setData({data_list_loding_status:0,data_list:[],data_bottom_line_status:!1});else e.setData({data_list_loding_status:0}),n.globalData.is_login_check(a.data,e,"get_data_list")&&n.globalData.showToast(a.data.msg)},fail:function(){t.hideLoading(),t.stopPullDownRefresh(),e.setData({data_list_loding_status:2}),n.globalData.showToast("服务器请求出错")}})},scroll_lower:function(t){this.get_data_list()},nav_event:function(t){this.setData({nav_status_index:t.currentTarget.dataset.index||0,data_page:1}),this.get_data_list(1)},edit_event:function(a){t.navigateTo({url:"/pages/plugins/invoice/invoice-saveinfo/invoice-saveinfo?id="+a.currentTarget.dataset.value})},delete_event:function(a){var e=this;t.showModal({title:"温馨提示",content:"删除后不可恢复，确定继续吗?",confirmText:"确认",cancelText:"不了",success:function(s){if(s.confirm){var i=a.currentTarget.dataset.value,o=a.currentTarget.dataset.index;t.showLoading({title:"处理中..."}),t.request({url:n.globalData.get_request_url("delete","user","invoice"),method:"POST",data:{ids:i},dataType:"json",success:function(a){if(t.hideLoading(),0==a.data.code){var s=e.data_list;s.splice(o,1),e.setData({data_list:s}),0==s.length&&e.setData({data_list_loding_status:0,data_bottom_line_status:!1}),n.globalData.showToast(a.data.msg,"success")}else n.globalData.showToast(a.data.msg)},fail:function(){t.hideLoading(),n.globalData.showToast("服务器请求出错")}})}}})}}};a.default=o}).call(this,e("543d")["default"])},"442c":function(t,a,e){},"465a":function(t,a,e){"use strict";var n;e.d(a,"b",(function(){return s})),e.d(a,"c",(function(){return i})),e.d(a,"a",(function(){return n}));var s=function(){var t=this,a=t.$createElement;t._self._c},i=[]},6600:function(t,a,e){"use strict";e.r(a);var n=e("0023"),s=e.n(n);for(var i in n)"default"!==i&&function(t){e.d(a,t,(function(){return n[t]}))}(i);a["default"]=s.a},9118:function(t,a,e){"use strict";var n=e("442c"),s=e.n(n);s.a},b288:function(t,a,e){"use strict";(function(t){e("7abb");n(e("66fd"));var a=n(e("be4f"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(a.default)}).call(this,e("543d")["createPage"])},be4f:function(t,a,e){"use strict";e.r(a);var n=e("465a"),s=e("6600");for(var i in s)"default"!==i&&function(t){e.d(a,t,(function(){return s[t]}))}(i);e("9118");var o,l=e("f0c5"),u=Object(l["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);a["default"]=u.exports}},[["b288","common/runtime","common/vendor"]]]);