(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/plugins/shop/detail/detail"],{"06b2":function(t,a,o){"use strict";var e;o.d(a,"b",(function(){return s})),o.d(a,"c",(function(){return n})),o.d(a,"a",(function(){return e}));var s=function(){var t=this,a=t.$createElement;t._self._c},n=[]},"143c":function(t,a,o){},"6a2c":function(t,a,o){"use strict";var e=o("143c"),s=o.n(e);s.a},"6d3a":function(t,a,o){"use strict";(function(t){o("7abb");e(o("66fd"));var a=e(o("b433"));function e(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=o,t(a.default)}).call(this,o("543d")["createPage"])},b433:function(t,a,o){"use strict";o.r(a);var e=o("06b2"),s=o("e51a");for(var n in s)"default"!==n&&function(t){o.d(a,t,(function(){return s[t]}))}(n);o("6a2c");var l,i=o("f0c5"),_=Object(i["a"])(s["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],l);a["default"]=_.exports},c952:function(t,a,o){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e=getApp(),s=function(){o.e("components/layout/layout").then(function(){return resolve(o("b489"))}.bind(null,o)).catch(o.oe)},n=function(){o.e("components/no-data/no-data").then(function(){return resolve(o("126b"))}.bind(null,o)).catch(o.oe)},l=function(){o.e("components/bottom-line/bottom-line").then(function(){return resolve(o("e5fd"))}.bind(null,o)).catch(o.oe)},i=e.globalData.get_static_url("common"),_={data:function(){return{common_static_url:i,data_bottom_line_status:!1,data_list_loding_status:1,data_list_loding_msg:"",currency_symbol:e.globalData.data.currency_symbol,params:null,user:null,data_base:null,shop:null,shop_favor_user:[],shop_navigation:[],shop_goods_category:[],data:null,goods_list:[],search_keywords_value:"",header_service_status:!1,nav_category_status:!1,shop_category_tab_value:0,shop_favor_info:{text:"收藏",status:0,count:0},share_info:{}}},components:{componentLayout:s,componentNoData:n,componentBottomLine:l},props:{},onLoad:function(t){this.setData({params:t,user:e.globalData.get_user_cache_info()})},onShow:function(){this.get_data(),this.init_config()},onPullDownRefresh:function(){this.get_data()},methods:{init_config:function(t){1==(t||!1)?this.setData({currency_symbol:e.globalData.get_config("currency_symbol")}):e.globalData.is_config(this,"init_config")},get_data:function(){var a=this;t.request({url:e.globalData.get_request_url("detail","index","shop"),method:"POST",data:{id:this.params.id||0},dataType:"json",success:function(o){if(t.stopPullDownRefresh(),0==o.data.code){var s=o.data.data;if(a.setData({data_base:s.base||null,shop:null==(s.shop||null)?null:s.shop,shop_favor_user:s.shop_favor_user||[],shop_navigation:s.shop_navigation||[],shop_goods_category:s.shop_goods_category||[],data:s.data||null,goods_list:null!=(s.data||null)&&null!=(s.data.goods||null)&&s.data.goods.length>0?s.data.goods:[],data_list_loding_msg:"",data_list_loding_status:0,data_bottom_line_status:!0}),null!=(a.shop||null)){0==(a.shop.data_model||0)&&a.shop_category_tab_handle();var n=-1!=a.shop_favor_user.indexOf(a.shop.id)?1:0;a.setData({shop_favor_info:{count:a.shop.shop_favor_count||0,status:n,text:(1==n?"已":"")+"收藏"}}),a.setData({share_info:{title:a.data.seo_title||a.shop.name,desc:a.data.seo_desc||a.shop.describe,path:"/pages/plugins/shop/detail/detail",query:"id="+a.shop.id,img:a.shop.logo}}),t.setNavigationBarTitle({title:a.shop.name})}}else a.setData({data_bottom_line_status:!1,data_list_loding_status:2,data_list_loding_msg:o.data.msg});e.globalData.show_share_menu()},fail:function(){t.stopPullDownRefresh(),a.setData({data_bottom_line_status:!1,data_list_loding_status:2,data_list_loding_msg:"服务器请求出错"}),e.globalData.showToast("服务器请求出错")}})},shop_favor_event:function(a){var o=this,s=e.globalData.get_user_info(this,"shop_favor_event");if(0!=s){if(e.globalData.user_is_need_login(s))return t.navigateTo({url:"/pages/login/login?event_callback=shop_favor_event"}),!1;t.showLoading({title:"处理中..."}),t.request({url:e.globalData.get_request_url("favor","shopfavor","shop"),method:"POST",data:{id:this.shop.id},dataType:"json",success:function(a){t.hideLoading(),0==a.data.code?(o.setData({shop_favor_info:a.data.data}),e.globalData.showToast(a.data.msg,"success")):e.globalData.is_login_check(a.data,o,"shop_favor_event")&&e.globalData.showToast(a.data.msg)},fail:function(){t.hideLoading(),e.globalData.showToast("服务器请求出错")}})}},search_keywords_event:function(t){this.setData({search_keywords_value:t.detail.value||""})},search_button_event:function(a){var o=a.currentTarget.dataset.value||null;t.navigateTo({url:o+"keywords="+this.search_keywords_value||""})},header_service_event:function(t){this.setData({header_service_status:!this.header_service_status})},nav_shop_category_event:function(t){this.setData({nav_category_status:!this.nav_category_status})},shop_category_event:function(a){var o=a.currentTarget.dataset.value||null;t.navigateTo({url:"/pages/plugins/shop/search/search?shop_id="+this.shop.id+"&category_id="+o})},nav_event:function(t){e.globalData.url_event(t)},text_copy_event:function(t){e.globalData.text_copy_event(t)},tel_event:function(t){e.globalData.call_tel(t.currentTarget.dataset.value||null)},image_show_event:function(t){e.globalData.image_show_event(t)},shop_category_tab_event:function(t){this.setData({shop_category_tab_value:t.currentTarget.dataset.value||0}),this.shop_category_tab_handle()},shop_category_tab_handle:function(){var t=this.shop_category_tab_value||0,a=this.data,o=[];if(a.goods.length>0)for(var e in a.goods)a.goods[e]["shop_category_id"]!=t&&0!=t||o.push(a.goods[e]);this.setData({goods_list:o,data_bottom_line_status:o.length>0})}}};a.default=_}).call(this,o("543d")["default"])},e51a:function(t,a,o){"use strict";o.r(a);var e=o("c952"),s=o.n(e);for(var n in e)"default"!==n&&function(t){o.d(a,t,(function(){return e[t]}))}(n);a["default"]=s.a}},[["6d3a","common/runtime","common/vendor"]]]);