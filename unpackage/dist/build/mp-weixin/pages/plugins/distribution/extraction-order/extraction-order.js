(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/plugins/distribution/extraction-order/extraction-order"],{2176:function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=getApp(),n=function(){e.e("components/popup/popup").then(function(){return resolve(e("b1e3"))}.bind(null,e)).catch(e.oe)},i=function(){e.e("components/no-data/no-data").then(function(){return resolve(e("126b"))}.bind(null,e)).catch(e.oe)},o=function(){e.e("components/bottom-line/bottom-line").then(function(){return resolve(e("e5fd"))}.bind(null,e)).catch(e.oe)},_={data:function(){return{data_list:[],data_total:0,data_page_total:0,data_page:1,data_list_loding_status:1,data_bottom_line_status:!1,params:null,nav_status_list:[{name:"全部",value:"-1"},{name:"待处理",value:"0"},{name:"已处理",value:"1"}],nav_status_index:0,is_show_take_popup:!1,extraction_value:null,extraction_code:"",form_submit_disabled_status:!1,is_show_search_popup:!1,search_keywords_value:"",content_list:[{name:"订单号",field:"order_no"},{name:"支付金额",field:"pay_price",unit:"元"}]}},components:{componentPopup:n,componentNoData:i,componentBottomLine:o},props:{},onLoad:function(t){var a=0;if(void 0!=t.status)for(var e in this.nav_status_list)if(this.nav_status_list[e]["value"]==t.status){a=e;break}this.setData({params:t,nav_status_index:a}),this.init()},onShow:function(){s.globalData.show_share_menu()},onPullDownRefresh:function(){this.setData({data_page:1}),this.get_data_list(1)},methods:{init:function(){var a=s.globalData.get_user_info(this,"init");if(0!=a){if(s.globalData.user_is_need_login(a))return t.redirectTo({url:"/pages/login/login?event_callback=init"}),!1;this.get_data_list()}else this.setData({data_list_loding_status:0,data_bottom_line_status:!1})},get_data_list:function(a){var e=this;if(0==(a||0)&&1==this.data_bottom_line_status)return t.stopPullDownRefresh(),!1;t.showLoading({title:"加载中..."}),this.setData({data_list_loding_status:1});var n=null==(this.nav_status_list[this.nav_status_index]||null)?-1:this.nav_status_list[this.nav_status_index]["value"];t.request({url:s.globalData.get_request_url("order","extraction","distribution"),method:"POST",data:{page:this.data_page,status:n||0,keywords:this.search_keywords_value||""},dataType:"json",success:function(a){if(t.hideLoading(),t.stopPullDownRefresh(),0==a.data.code)if(a.data.data.data.length>0){if(e.data_page<=1)var n=a.data.data.data;else{n=e.data_list||[];var i=a.data.data.data;for(var o in i)n.push(i[o])}e.setData({data_list:n,data_total:a.data.data.total,data_page_total:a.data.data.page_total,data_list_loding_status:3,data_page:e.data_page+1}),e.setData({data_bottom_line_status:e.data_page>1&&e.data_page>e.data_page_total})}else e.setData({data_list_loding_status:0,data_list:[],data_bottom_line_status:!1});else e.setData({data_list_loding_status:0}),s.globalData.is_login_check(a.data,e,"get_data_list")&&s.globalData.showToast(a.data.msg)},fail:function(){t.hideLoading(),t.stopPullDownRefresh(),e.setData({data_list_loding_status:2}),s.globalData.showToast("服务器请求出错")}})},scroll_lower:function(t){this.get_data_list()},nav_event:function(t){this.setData({nav_status_index:t.currentTarget.dataset.index||0,data_page:1}),this.get_data_list(1)},list_submit_take_event:function(t){this.setData({is_show_take_popup:!0,extraction_code:"",extraction_value:{index:t.currentTarget.dataset.index,oid:t.currentTarget.dataset.oid,uid:t.currentTarget.dataset.uid}})},take_popup_event_close:function(){this.setData({is_show_take_popup:!1})},extraction_code_input_event:function(t){this.setData({extraction_code:t.detail.value||""})},form_submit_take_event:function(a){var e=this;if(null==(this.extraction_code||null))return s.globalData.showToast("请输入取件码"),!1;if(null==(this.extraction_value||null))return s.globalData.showToast("操作数据有误"),!1;var n={id:this.extraction_value.oid,user_id:this.extraction_value.uid,extraction_code:this.extraction_code};this.setData({form_submit_disabled_status:!0}),t.showLoading({title:"处理中..."}),t.request({url:s.globalData.get_request_url("take","extraction","distribution"),method:"POST",data:n,dataType:"json",success:function(a){if(e.setData({form_submit_disabled_status:!1}),t.hideLoading(),0==a.data.code){var n=e.data_list,i=e.extraction_value.index;n[i]["status"]=1,n[i]["status_name"]="已处理",e.setData({is_show_take_popup:!1,data_list:n}),s.globalData.showToast(a.data.msg,"success")}else s.globalData.showToast(a.data.msg)},fail:function(){e.setData({form_submit_disabled_status:!1}),t.hideLoading(),s.globalData.showToast("服务器请求出错")}})},drag_event:function(t){this.setData({is_show_search_popup:!0})},search_popup_event_close:function(){this.setData({is_show_search_popup:!1})},search_input_keywords_event:function(t){this.setData({search_keywords_value:t.detail.value||""})},search_submit_event:function(t){this.setData({is_show_search_popup:!1,data_page:1}),this.get_data_list(1)}}};a.default=_}).call(this,e("543d")["default"])},4649:function(t,a,e){},7472:function(t,a,e){"use strict";e.r(a);var s=e("c7e5"),n=e("d65e");for(var i in n)"default"!==i&&function(t){e.d(a,t,(function(){return n[t]}))}(i);e("cff5");var o,_=e("f0c5"),u=Object(_["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],o);a["default"]=u.exports},"97a8":function(t,a,e){"use strict";(function(t){e("7abb");s(e("66fd"));var a=s(e("7472"));function s(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(a.default)}).call(this,e("543d")["createPage"])},c7e5:function(t,a,e){"use strict";var s;e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return i})),e.d(a,"a",(function(){return s}));var n=function(){var t=this,a=t.$createElement;t._self._c},i=[]},cff5:function(t,a,e){"use strict";var s=e("4649"),n=e.n(s);n.a},d65e:function(t,a,e){"use strict";e.r(a);var s=e("2176"),n=e.n(s);for(var i in s)"default"!==i&&function(t){e.d(a,t,(function(){return s[t]}))}(i);a["default"]=n.a}},[["97a8","common/runtime","common/vendor"]]]);