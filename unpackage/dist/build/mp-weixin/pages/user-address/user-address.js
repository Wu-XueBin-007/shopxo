(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user-address/user-address"],{"008a":function(a,t,e){"use strict";var s=e("7272"),n=e.n(s);n.a},3320:function(a,t,e){"use strict";(function(a){e("7abb");s(e("66fd"));var t=s(e("8ca1"));function s(a){return a&&a.__esModule?a:{default:a}}wx.__webpack_require_UNI_MP_PLUGIN__=e,a(t.default)}).call(this,e("543d")["createPage"])},7272:function(a,t,e){},"81a5":function(a,t,e){"use strict";var s;e.d(t,"b",(function(){return n})),e.d(t,"c",(function(){return o})),e.d(t,"a",(function(){return s}));var n=function(){var a=this,t=a.$createElement;a._self._c},o=[]},"8ca1":function(a,t,e){"use strict";e.r(t);var s=e("81a5"),n=e("c07d");for(var o in n)"default"!==o&&function(a){e.d(t,a,(function(){return n[a]}))}(o);e("008a");var l,d=e("f0c5"),i=Object(d["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],l);t["default"]=i.exports},c07d:function(a,t,e){"use strict";e.r(t);var s=e("c371"),n=e.n(s);for(var o in s)"default"!==o&&function(a){e.d(t,a,(function(){return s[a]}))}(o);t["default"]=n.a},c371:function(a,t,e){"use strict";(function(a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=getApp(),n=function(){e.e("components/no-data/no-data").then(function(){return resolve(e("126b"))}.bind(null,e)).catch(e.oe)},o=function(){e.e("components/bottom-line/bottom-line").then(function(){return resolve(e("e5fd"))}.bind(null,e)).catch(e.oe)},l=s.globalData.get_static_url("common"),d={data:function(){return{common_static_url:l,data_list_loding_status:1,data_bottom_line_status:!1,data_list:[],params:null,is_default:0}},components:{componentNoData:n,componentBottomLine:o},props:{},onLoad:function(a){this.setData({params:a})},onShow:function(){this.init(),s.globalData.show_share_menu()},onPullDownRefresh:function(){this.get_data_list()},methods:{init:function(){var t=s.globalData.get_user_info(this,"init");if(0!=t){if(s.globalData.user_is_need_login(t))return a.redirectTo({url:"/pages/login/login?event_callback=init"}),!1;this.get_data_list()}else this.setData({data_list_loding_status:0,data_bottom_line_status:!1})},get_data_list:function(){var t=this;a.showLoading({title:"加载中..."}),this.setData({data_list_loding_status:1}),a.request({url:s.globalData.get_request_url("index","useraddress"),method:"POST",data:{},dataType:"json",success:function(e){if(a.hideLoading(),a.stopPullDownRefresh(),0==e.data.code){var n=e.data.data;if(n.data.length>0){var o=0;for(var l in n.data)1==n.data[l]["is_default"]&&(o=n.data[l]["id"]);t.setData({data_list:n.data,is_default:o,data_list_loding_status:3,data_bottom_line_status:!0})}else t.setData({data_list_loding_status:0})}else t.setData({data_list_loding_status:0}),s.globalData.is_login_check(e.data,t,"get_data_list")&&s.globalData.showToast(e.data.msg)},fail:function(){a.hideLoading(),a.stopPullDownRefresh(),t.setData({data_list_loding_status:2}),s.globalData.showToast("服务器请求出错")}})},address_delete_event:function(t){var e=t.currentTarget.dataset.index,n=t.currentTarget.dataset.value||null;if(null==n)return s.globalData.showToast("地址ID有误"),!1;var o=this;a.showModal({title:"温馨提示",content:"删除后不可恢复，确定继续吗?",confirmText:"确认",cancelText:"不了",success:function(t){t.confirm&&(a.showLoading({title:"处理中..."}),a.request({url:s.globalData.get_request_url("delete","useraddress"),method:"POST",data:{id:n},dataType:"json",success:function(t){if(a.hideLoading(),0==t.data.code){var l=o.data_list;l.splice(e,1),o.setData({data_list:l,data_list_loding_status:0==l.length?0:3,data_bottom_line_status:0!=l.length}),s.globalData.showToast(t.data.msg,"success");var d=a.getStorageSync(s.globalData.data.cache_buy_user_address_select_key);null!=(d.data||null)&&d.data.id==n&&a.removeStorageSync(s.globalData.data.cache_buy_user_address_select_key)}else s.globalData.is_login_check(t.data)?s.globalData.showToast(t.data.msg):s.globalData.showToast("提交失败，请重试！")},fail:function(){a.hideLoading(),s.globalData.showToast("服务器请求出错")}}))}})},address_default_event:function(t){var e=t.currentTarget.dataset.value||null;if(null==e)return s.globalData.showToast("地址ID有误"),!1;var n=this;if(e==n.is_default)return s.globalData.showToast("设置成功","success"),!1;a.showLoading({title:"处理中..."}),a.request({url:s.globalData.get_request_url("setdefault","useraddress"),method:"POST",data:{id:e},dataType:"json",success:function(t){a.hideLoading(),0==t.data.code?(n.setData({is_default:e}),s.globalData.showToast(t.data.msg,"success")):s.globalData.is_login_check(t.data)?s.globalData.showToast(t.data.msg):s.globalData.showToast("提交失败，请重试！")},fail:function(){a.hideLoading(),s.globalData.showToast("服务器请求出错")}})},address_conent_event:function(t){var e=t.currentTarget.dataset.index||0,n=this.params.is_back||0;1==n&&(a.setStorage({key:s.globalData.data.cache_buy_user_address_select_key,data:this.data_list[e]}),a.navigateBack())},choose_system_address_event:function(t){a.chooseAddress({success:function(t){var e=this,n={name:t.userName||"",tel:t.telNumber||"",province:t.provinceName||"",city:t.cityName||"",county:t.countyName||"",address:t.detailInfo||""};a.showLoading({title:"处理中..."}),a.request({url:s.globalData.get_request_url("outsystemadd","useraddress"),method:"POST",data:n,dataType:"json",success:function(t){a.hideLoading(),0==t.data.code?e.get_data_list():s.globalData.is_login_check(t.data)?s.globalData.showToast(t.data.msg):s.globalData.showToast("提交失败，请重试！")},fail:function(){a.hideLoading(),s.globalData.showToast("服务器请求出错")}})}})},address_add_event:function(t){a.navigateTo({url:"/pages/user-address-save/user-address-save"})},address_edit_event:function(t){var e=t.currentTarget.dataset.index||0,n=this.data_list[e]||null;if(null==n)return s.globalData.showToast("地址有误"),!1;a.navigateTo({url:"/pages/user-address-save/user-address-save?id="+n.id})},address_map_event:function(a){var t=a.currentTarget.dataset.index||0,e=this.data_list[t]||null;if(null==e)return s.globalData.showToast("地址有误"),!1;var n=e.alias||e.name||"",o=(e.province_name||"")+(e.city_name||"")+(e.county_name||"")+(e.address||"");s.globalData.open_location(e.lng,e.lat,n,o)}}};t.default=d}).call(this,e("543d")["default"])}},[["3320","common/runtime","common/vendor"]]]);